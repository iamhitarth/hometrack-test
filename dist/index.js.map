{"version":3,"sources":["../index.js"],"names":["express","require","app","bodyParser","propFilter","use","urlencoded","extended","json","port","process","env","PORT","err","req","res","next","SyntaxError","status","get","message","post","props","body","payload","Array","filtered","getFiltered","response","listen","console","log"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,MAAMF,SAAV;AACA,IAAIG,aAAaF,QAAQ,aAAR,CAAjB;AACA,IAAIG,aAAaH,QAAQ,sBAAR,CAAjB;;AAEAC,IAAIG,GAAJ,CAAQF,WAAWG,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;AACAL,IAAIG,GAAJ,CAAQF,WAAWK,IAAX,EAAR;;AAEA,IAAIC,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B;;AAEAV,IAAIG,GAAJ,CAAQ,UAASQ,GAAT,EAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAClC,QAAIH,eAAeI,WAAf,IAA8BJ,IAAIK,MAAJ,KAAe,GAA7C,IAAoD,UAAUL,GAAlE,EAAuE;AACnEE,YAAIG,MAAJ,CAAW,GAAX,EAAgBV,IAAhB,CAAqB;AACjB,qBAAS;AADQ,SAArB;AAGH;AACJ,CAND;;AAQAN,IAAIiB,GAAJ,CAAQ,GAAR,EAAa,UAACL,GAAD,EAAMC,GAAN,EAAc;AACvBA,QAAIP,IAAJ,CAAS,EAAEY,SAAS,oCAAX,EAAT;AACH,CAFD;;AAIAlB,IAAImB,IAAJ,CAAS,GAAT,EAAc,UAACP,GAAD,EAAMC,GAAN,EAAc;AACxB,QAAIO,QAAQR,IAAIS,IAAJ,CAASC,OAArB;AACA,QAAGF,SAASA,iBAAiBG,KAA7B,EAAmC;AAC/B,YAAIC,WAAWtB,WAAWuB,WAAX,CAAuBL,KAAvB,EAA8B,KAA9B,EAAqC,WAArC,CAAf;AACAP,YAAIP,IAAJ,CAAS,EAAEoB,UAAUF,QAAZ,EAAT;AACH,KAHD,MAGK;AACDX,YAAIG,MAAJ,CAAW,GAAX,EAAgBV,IAAhB,CAAqB;AACjB,qBAAS;AADQ,SAArB;AAGH;AACJ,CAVD;;AAYAN,IAAI2B,MAAJ,CAAWpB,IAAX;;AAEAqB,QAAQC,GAAR,8CAAuDtB,IAAvD","file":"index.js","sourcesContent":["let express = require('express');\nlet app = express();\nlet bodyParser = require('body-parser');\nlet propFilter = require('./lib/propertyFilter');\n\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\nlet port = process.env.PORT || 8080;\n\napp.use(function(err, req, res, next) {\n    if (err instanceof SyntaxError && err.status === 400 && 'body' in err) {\n        res.status(400).json({\n            'error': 'Could not decode request: JSON parsing failed'\n        });\n    }\n});\n\napp.get('/', (req, res) => {\n    res.json({ message: 'Just testing API is up and running' });\n});\n\napp.post('/', (req, res) => {\n    let props = req.body.payload;\n    if(props && props instanceof Array){\n        let filtered = propFilter.getFiltered(props, 'htv', 'completed');\n        res.json({ response: filtered});\n    }else{\n        res.status(400).json({\n            'error': 'Could not decode request: Invalid payload'\n        });\n    }\n});\n\napp.listen(port);\n\nconsole.log(`Hometrack test API is up and running on ${port}`);\n\n"]}