{"version":3,"sources":["../index.js"],"names":["express","require","app","bodyParser","propFilter","use","urlencoded","extended","json","port","process","env","PORT","err","req","res","next","SyntaxError","status","get","message","post","filtered","getFiltered","body","payload","response","listen","console","log"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,MAAMF,SAAV;AACA,IAAIG,aAAaF,QAAQ,aAAR,CAAjB;AACA,IAAIG,aAAaH,QAAQ,sBAAR,CAAjB;;AAEAC,IAAIG,GAAJ,CAAQF,WAAWG,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;AACAL,IAAIG,GAAJ,CAAQF,WAAWK,IAAX,EAAR;;AAEA,IAAIC,OAAOC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAA/B;;AAEAV,IAAIG,GAAJ,CAAQ,UAASQ,GAAT,EAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAClC,QAAIH,eAAeI,WAAf,IAA8BJ,IAAIK,MAAJ,KAAe,GAA7C,IAAoD,UAAUL,GAAlE,EAAuE;AACnEE,YAAIG,MAAJ,CAAW,GAAX,EAAgBV,IAAhB,CAAqB;AACjB,qBAAS;AADQ,SAArB;AAGH;AACJ,CAND;;AAQAN,IAAIiB,GAAJ,CAAQ,GAAR,EAAa,UAACL,GAAD,EAAMC,GAAN,EAAc;AACvBA,QAAIP,IAAJ,CAAS,EAAEY,SAAS,oCAAX,EAAT;AACH,CAFD;;AAIAlB,IAAImB,IAAJ,CAAS,GAAT,EAAc,UAACP,GAAD,EAAMC,GAAN,EAAc;AACxB,QAAIO,WAAWlB,WAAWmB,WAAX,CAAuBT,IAAIU,IAAJ,CAASC,OAAhC,EAAyC,KAAzC,EAAgD,WAAhD,CAAf;AACAV,QAAIP,IAAJ,CAAS,EAAEkB,UAAUJ,QAAZ,EAAT;AACH,CAHD;;AAKApB,IAAIyB,MAAJ,CAAWlB,IAAX;;AAEAmB,QAAQC,GAAR,8CAAuDpB,IAAvD","file":"index.js","sourcesContent":["let express = require('express');\nlet app = express();\nlet bodyParser = require('body-parser');\nlet propFilter = require('./lib/propertyFilter');\n\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\nlet port = process.env.PORT || 8080;\n\napp.use(function(err, req, res, next) {\n    if (err instanceof SyntaxError && err.status === 400 && 'body' in err) {\n        res.status(400).json({\n            'error': 'Could not decode request: JSON parsing failed'\n        });\n    }\n});\n\napp.get('/', (req, res) => {\n    res.json({ message: 'Just testing API is up and running' });\n});\n\napp.post('/', (req, res) => {\n    let filtered = propFilter.getFiltered(req.body.payload, 'htv', 'completed');\n    res.json({ response: filtered});\n});\n\napp.listen(port);\n\nconsole.log(`Hometrack test API is up and running on ${port}`);\n\n"]}